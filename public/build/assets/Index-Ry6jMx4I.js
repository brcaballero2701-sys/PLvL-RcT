import{j as e}from"./app-RZ6KLPYO.js";import{b as $,r as l,L as c}from"./vendor-x9zrslyQ.js";import{S as q}from"./SidebarLayout-CnrJwSn-.js";import{E as N}from"./eye-DBMp8Tk3.js";import{S as w}from"./square-pen-Cg0nidcY.js";import{T as C}from"./trash-2-6pqDQCm4.js";import{C as R,a as M}from"./chevron-right-LjKBkTtf.js";import{S as _}from"./search-CnVRK-jH.js";import{P as D}from"./plus-B724myQV.js";import"./LogoDisplay-D9oHNFRY.js";import"./createLucideIcon-DJ0S87ah.js";import"./log-out-EHiVwLuR.js";import"./users-F8RKVWAu.js";import"./settings-BHex1vnf.js";import"./shield-sybB8x6n.js";import"./clock-BxYY4ze5.js";function ae({instructores:x={data:[]}}){const{systemSettings:F,ziggy:X}=$().props,[r,E]=l.useState(""),[m,p]=l.useState(null),[g,S]=l.useState(8),[t,o]=l.useState(1),[j,h]=l.useState({visible:!1,id:null}),f=x.data.filter(s=>s.nombres?.toLowerCase().includes(r.toLowerCase())||s.apellidos?.toLowerCase().includes(r.toLowerCase())||s.documento_identidad?.includes(r)||s.area_asignada?.toLowerCase().includes(r.toLowerCase())||s.email?.toLowerCase().includes(r.toLowerCase())),i=f.length,n=Math.ceil(i/g),u=(t-1)*g,b=u+g,y=f.slice(u,b),P=s=>{o(s)},k=()=>{t>1&&o(t-1)},I=()=>{t<n&&o(t+1)};l.useEffect(()=>{o(1)},[r]);const v=s=>{h({visible:!0,id:s})},L=()=>{const s=j.id;h({visible:!1,id:null}),p(s),console.log("ðŸ”´ Iniciando eliminaciÃ³n del instructor ID:",s);const d=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");console.log("ðŸ” Token CSRF obtenido:",d?"SÃ­":"No"),fetch(`/admin/instructores/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":d||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"}).then(a=>{if(console.log("âœ… Response status:",a.status),a.ok||a.status===204||a.status===200)console.log("âœ… EliminaciÃ³n exitosa"),setTimeout(()=>{console.log("ðŸ”„ Recargando la pÃ¡gina..."),location.reload()},300);else return a.text().then(z=>{throw new Error(`Error ${a.status}: ${z}`)})}).catch(a=>{console.error("âŒ Error en eliminaciÃ³n:",a),p(null),alert("Error al eliminar el instructor: "+a.message)})},T=()=>{h({visible:!1,id:null})},A=s=>{S(parseInt(s)),o(1)};return e.jsxs(q,{title:"Instructores - SENA",header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Instructores"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona el registro de instructores del sistema"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o numero",value:r,onChange:s=>E(s.target.value),className:"w-80 pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs(c,{href:"/admin/instructores/create",className:"bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(D,{size:20}),"Agregar Instructor"]})]})]}),children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"hidden lg:block bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4 px-6 py-4 font-medium text-gray-700 text-sm",children:[e.jsx("div",{children:"Nombre Completo"}),e.jsx("div",{children:"Documento"}),e.jsx("div",{children:"Correo"}),e.jsx("div",{children:"TelÃ©fono"}),e.jsx("div",{className:"text-center",children:"Acciones"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.length>0?y.map((s,d)=>e.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"lg:hidden space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[s.nombres," ",s.apellidos]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Doc: ",s.documento_identidad]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{href:`/admin/instructores/${s.id}`,className:"inline-flex items-center justify-center p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(N,{size:18})}),e.jsx(c,{href:`/admin/instructores/${s.id}/edit`,className:"inline-flex items-center justify-center p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors",title:"Editar instructor",children:e.jsx(w,{size:18})}),e.jsx("button",{onClick:()=>v(s.id),disabled:m===s.id,className:"inline-flex items-center justify-center p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar instructor",children:m===s.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(C,{size:18})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Correo:"}),e.jsx("p",{className:"text-gray-700 break-all",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"TelÃ©fono:"}),e.jsx("p",{className:"text-gray-700",children:s.telefono||"N/A"})]})]})]}),e.jsxs("div",{className:"hidden lg:grid grid-cols-5 gap-4 items-center",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-sm",children:[s.nombres," ",s.apellidos]}),e.jsx("div",{className:"text-gray-700 text-sm",children:s.documento_identidad}),e.jsx("div",{className:"text-gray-700 text-xs truncate",title:s.email,children:s.email}),e.jsx("div",{className:"text-gray-700 text-sm",children:s.telefono||"N/A"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(c,{href:`/admin/instructores/${s.id}`,className:"inline-flex items-center justify-center p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(N,{size:18})}),e.jsx(c,{href:`/admin/instructores/${s.id}/edit`,className:"inline-flex items-center justify-center p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors",title:"Editar instructor",children:e.jsx(w,{size:18})}),e.jsx("button",{onClick:()=>v(s.id),disabled:m===s.id,className:"inline-flex items-center justify-center p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar instructor",children:m===s.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(C,{size:18})})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No se encontraron instructores"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:x.data.length===0?"AÃºn no hay instructores registrados. Â¡Agrega el primero!":"Intenta con otros tÃ©rminos de bÃºsqueda"})]})})]}),i>0&&n>1&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:u+1})," - ",e.jsx("span",{className:"font-medium",children:Math.min(b,i)})," de"," ",e.jsx("span",{className:"font-medium",children:i})," instructores",r&&e.jsxs("span",{className:"text-gray-500",children:[" (filtrados de ",x.data.length," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:k,disabled:t===1,className:`flex items-center px-3 py-2 text-sm border rounded-md transition-colors ${t===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:n},(s,d)=>d+1).map(s=>s===1||s===n||s>=t-1&&s<=t+1?e.jsx("button",{onClick:()=>P(s),className:`px-3 py-2 text-sm border rounded-md transition-colors ${t===s?"bg-green-600 text-white border-green-600":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s},s):s===t-2||s===t+2?e.jsx("span",{className:"px-2 py-2 text-sm text-gray-500",children:"..."},s):null)}),e.jsxs("button",{onClick:I,disabled:t===n,className:`flex items-center px-3 py-2 text-sm border rounded-md transition-colors ${t===n?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:["Siguiente",e.jsx(M,{className:"w-4 h-4 ml-1"})]})]})]}),e.jsx("div",{className:"flex items-center justify-center pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Mostrar:"}),e.jsxs("select",{value:g,onChange:s=>A(s.target.value),className:"px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 cursor-pointer",children:[e.jsx("option",{value:5,children:"5 por pÃ¡gina"}),e.jsx("option",{value:8,children:"8 por pÃ¡gina"}),e.jsx("option",{value:15,children:"15 por pÃ¡gina"}),e.jsx("option",{value:25,children:"25 por pÃ¡gina"})]})]})})]}),i>0&&n<=1&&e.jsx("div",{className:"mt-6 text-sm text-gray-600 text-center",children:e.jsxs("p",{children:["Mostrando ",i," instructor",i!==1?"es":"",r&&e.jsxs("span",{className:"text-gray-500",children:[" (filtrados de ",x.data.length," total)"]})]})})]}),j.visible&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-sm",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Confirmar EliminaciÃ³n"}),e.jsx("p",{className:"text-gray-600 mb-6 text-base leading-relaxed",children:"Â¿EstÃ¡s seguro de que deseas eliminar este instructor? Esta acciÃ³n no se puede deshacer."}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:T,className:"px-6 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:L,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Eliminar"})]})]})})]})}export{ae as default};
