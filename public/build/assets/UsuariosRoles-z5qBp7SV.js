import{j as e}from"./app-BRN7_fgC.js";import{r as m,u as N,H as v,L as x,a as w}from"./vendor-x9zrslyQ.js";import{A as _}from"./arrow-left-CnFJRCdA.js";import{U as R}from"./users-F8RKVWAu.js";import{S as k}from"./square-pen-Cg0nidcY.js";import{T as C}from"./trash-2-6pqDQCm4.js";import{P as E}from"./plus-B724myQV.js";import"./createLucideIcon-DJ0S87ah.js";function P({roles:u=[]}){const[p,r]=m.useState(!1),[a,l]=m.useState(null),{data:n,setData:i,post:g,put:h,processing:d,errors:t,reset:o}=N({name:"",display_name:"",description:"",permissions:[]}),y=s=>{s.preventDefault(),g(route("admin.roles.store"),{onSuccess:()=>{o(),r(!1)}})},f=s=>{l(s),i({name:s.name,display_name:s.display_name,description:s.description||"",permissions:s.permissions||[]}),r(!0)},b=s=>{s.preventDefault(),h(route("admin.roles.update",a.id),{onSuccess:()=>{o(),r(!1),l(null)}})},j=s=>{confirm(`¿Estás seguro de que deseas eliminar el rol "${s.display_name}"?`)&&w.delete(route("admin.roles.destroy",s.id),{onSuccess:()=>{},onError:c=>{c.message&&alert(c.message)}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(v,{title:"Usuarios y Roles - SENA"}),e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{href:route("admin.configuraciones"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(_,{size:20})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Usuarios y Roles"})]}),e.jsx(x,{href:route("admin.configuraciones"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Volver"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Roles existentes"}),e.jsx("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"Rol"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"Usuarios"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-700 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.display_name}),s.description&&e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"mr-2 text-gray-400",size:16}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:s.users_count})]})}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[!s.is_system_role&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>f(s),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[e.jsx(k,{size:14,className:"mr-1"}),"Editar"]}),e.jsxs("button",{onClick:()=>j(s),className:"inline-flex items-center px-3 py-1 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 transition-colors",children:[e.jsx(C,{size:14,className:"mr-1"}),"Eliminar"]})]}),s.is_system_role&&e.jsx("span",{className:"text-sm text-gray-500 italic",children:"Rol del sistema"})]})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Crear rol"}),p?e.jsxs("form",{onSubmit:a?b:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del rol (interno)"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>i("name",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"ej: coordinador",disabled:a,required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre para mostrar"}),e.jsx("input",{type:"text",value:n.display_name,onChange:s=>i("display_name",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"ej: Coordinador Académico",required:!0}),t.display_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.display_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{value:n.description,onChange:s=>i("description",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Descripción del rol y sus responsabilidades",rows:"3"}),t.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.description})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),l(null),o()},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:d?"Guardando...":a?"Actualizar rol":"Agregar rol"})]})]}):e.jsxs("div",{className:"flex flex-col items-center py-8",children:[e.jsx("input",{type:"text",placeholder:"Nombre del rol",className:"w-full max-w-md px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 mb-4",onFocus:()=>r(!0)}),e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(E,{size:18,className:"mr-2"}),"Agregar rol"]})]})]})]})]})}export{P as default};
