import{j as e}from"./app-BRN7_fgC.js";import{b as A,r as h,a as y}from"./vendor-x9zrslyQ.js";import{S as $,X as M}from"./SidebarLayout-B-S0u12W.js";import{S as N}from"./search-CnVRK-jH.js";import{C as v}from"./calendar-lDWT8Q70.js";import{C as w}from"./clock-BxYY4ze5.js";import{C as B,a as O}from"./chevron-right-LjKBkTtf.js";import{F as q}from"./funnel-DCrBAa9x.js";import"./LogoDisplay-kgMPAL-l.js";import"./createLucideIcon-DJ0S87ah.js";import"./log-out-EHiVwLuR.js";import"./users-F8RKVWAu.js";import"./settings-BHex1vnf.js";import"./shield-sybB8x6n.js";function re({instructores:_=[],historialData:l=[],estadisticas:o={},filtros:d={}}){const{systemSettings:G}=A().props,[t,i]=h.useState({fecha:d.fecha||"",filter_hora:d.filter_hora||"",filter_instructor:d.filter_instructor||"",filter_asistencia:d.filter_asistencia||""}),[g,P]=h.useState(!1),[a,n]=h.useState(1),[c,S]=h.useState(10),C=s=>{const r=Object.keys(s).reduce((b,u)=>(s[u]!==""&&(b[u]=s[u]),b),{});y.get(route("guardia.historial"),r,{preserveState:!0,preserveScroll:!0})},T=()=>{i({fecha:"",filter_hora:"",filter_instructor:"",filter_asistencia:""}),y.get(route("guardia.historial"),{},{preserveState:!0,preserveScroll:!0})},x={totalRegistrosHoy:o.totalRegistrosHoy||0,llegadasPuntuales:o.llegadasPuntuales||0,llegadasTarde:o.llegadasTarde||0,ausencias:o.ausencias||0},k=[{id:1,instructor:"MarÃ­a GarcÃ­a",area:"Sistemas",fecha:"11/11/2024",horaEntrada:"07:00",horaSalida:"15:00",estado:"Puntual"},{id:2,instructor:"Juan PÃ©rez",area:"MatemÃ¡ticas",fecha:"11/11/2024",horaEntrada:"07:30",horaSalida:"15:30",estado:"Tarde"},{id:3,instructor:"Ana LÃ³pez",area:"InglÃ©s",fecha:"11/11/2024",horaEntrada:"07:15",horaSalida:"15:15",estado:"Puntual"}],p=l.data&&l.data.length>0?l.data:l.length>0?l:k,F=p.length,m=Math.ceil(F/c),f=(a-1)*c,z=f+c,j=p.slice(f,z),E=s=>{n(s),window.scrollTo({top:0,behavior:"smooth"})},H=()=>{a>1&&(n(a-1),window.scrollTo({top:0,behavior:"smooth"}))},L=()=>{a<m&&(n(a+1),window.scrollTo({top:0,behavior:"smooth"}))},I=s=>{S(s),n(1)},R=s=>{n(1),C(s)};return e.jsx($,{title:"Historial de Asistencias - SENA",header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Historial de Entrada y Salida"}),e.jsx("p",{className:"text-gray-600",children:"Consulte el historial completo de asistencias de instructores"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>P(!g),className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(q,{size:16}),g?"Ocultar Filtros":"Mostrar Filtros"]}),e.jsxs("button",{onClick:()=>R(t),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(N,{size:16}),"Buscar"]})]})]}),children:e.jsxs("div",{className:"p-8",children:[g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"text-green-600",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros de BÃºsqueda"})]}),(t.fecha||t.filter_hora||t.filter_instructor||t.filter_asistencia)&&e.jsxs("button",{onClick:T,className:"text-sm text-red-600 hover:text-red-800 flex items-center gap-1 transition-colors",children:[e.jsx(M,{size:14}),"Limpiar Filtros"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“… Fecha"}),e.jsx("input",{type:"date",value:t.fecha,onChange:s=>i({...t,fecha:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ• Hora"}),e.jsxs("select",{value:t.filter_hora,onChange:s=>i({...t,filter_hora:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[e.jsx("option",{value:"",children:"Todas las horas"}),e.jsx("option",{value:"manana",children:"ðŸŒ… MaÃ±ana (06:00 - 12:00)"}),e.jsx("option",{value:"tarde",children:"â˜€ï¸ Tarde (12:01 - 18:00)"}),e.jsx("option",{value:"noche",children:"ðŸŒ™ Noche (18:01 - 23:59)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ‘¨â€ðŸ« Instructor"}),e.jsxs("select",{value:t.filter_instructor,onChange:s=>i({...t,filter_instructor:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[e.jsx("option",{value:"",children:"Todos los instructores"}),_.map(s=>e.jsx("option",{value:s.id,children:`${s.nombres} ${s.apellidos}`},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“Š Tipo de Registro"}),e.jsxs("select",{value:t.filter_asistencia,onChange:s=>i({...t,filter_asistencia:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[e.jsx("option",{value:"",children:"Todos los registros"}),e.jsx("option",{value:"puntual",children:"âœ… Puntual"}),e.jsx("option",{value:"tarde",children:"â° Llegada Tarde"}),e.jsx("option",{value:"salida",children:"ðŸšª Salida"})]})]})]}),(t.fecha||t.filter_hora||t.filter_instructor||t.filter_asistencia)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Filtros activos:"}),t.fecha&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["ðŸ“… ",t.fecha]}),t.filter_hora&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["ðŸ• ",t.filter_hora]}),t.filter_instructor&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["ðŸ‘¨â€ðŸ« ",t.filter_instructor]}),t.filter_asistencia&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["ðŸ“Š ",t.filter_asistencia==="puntual"?"Puntual":t.filter_asistencia==="tarde"?"Llegada Tarde":t.filter_asistencia==="salida"?"Salida":t.filter_asistencia]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Registros"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.totalRegistrosHoy}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.fecha?`Fecha: ${t.fecha}`:"Hoy"})]}),e.jsx(v,{className:"text-green-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas Puntuales"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.llegadasPuntuales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Antes de 07:15"})]}),e.jsx(w,{className:"text-blue-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas Tarde"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.llegadasTarde}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"DespuÃ©s de 07:15"})]}),e.jsx(w,{className:"text-yellow-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ausencias"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.ausencias}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sin registro"})]}),e.jsx(v,{className:"text-red-500",size:24})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Historial de Asistencias",t.fecha&&` - ${t.fecha}`]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[j.length," registros"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ãrea"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Entrada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Salida"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.instructor}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.area}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.fecha}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaEntrada}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaSalida}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.estado==="Puntual"?"bg-green-100 text-green-800":s.estado==="Tarde"?"bg-yellow-100 text-yellow-800":s.estado==="Ausente"?"bg-red-100 text-red-800":s.estado==="Salida"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.estado})})]},s.id||r))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:H,disabled:a===1,className:`px-3 py-1 rounded-lg text-sm font-medium ${a===1?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:e.jsx(B,{size:16})}),Array.from({length:m},(s,r)=>e.jsx("button",{onClick:()=>E(r+1),className:`px-3 py-1 rounded-lg text-sm font-medium ${a===r+1?"bg-green-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:r+1},r)),e.jsx("button",{onClick:L,disabled:a===m,className:`px-3 py-1 rounded-lg text-sm font-medium ${a===m?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:e.jsx(O,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mr-2",children:"Registros por pÃ¡gina:"}),e.jsxs("select",{value:c,onChange:s=>I(Number(s.target.value)),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})]})]})})}export{re as default};
