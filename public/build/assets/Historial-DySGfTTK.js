import{j as e}from"./app-DJ5bgocT.js";import{b as B,r as m,a as N}from"./vendor-x9zrslyQ.js";import{S as $,X as O}from"./SidebarLayout-dYuel0tg.js";import{T as l}from"./ThemeButton-7DT0h3f3.js";import{S as v}from"./search-CnVRK-jH.js";import{C as w}from"./calendar-lDWT8Q70.js";import{C}from"./clock-BxYY4ze5.js";import{C as q,a as G}from"./chevron-right-LjKBkTtf.js";import{F as J}from"./funnel-DCrBAa9x.js";import"./LogoDisplay-BOBuzyd2.js";import"./createLucideIcon-DJ0S87ah.js";import"./log-out-EHiVwLuR.js";import"./users-F8RKVWAu.js";import"./settings-BHex1vnf.js";import"./shield-sybB8x6n.js";function ie({instructores:P=[],historialData:i=[],estadisticas:o={},filtros:p={}}){const{systemSettings:X}=B().props,[t,c]=m.useState({fecha:p.fecha||"",instructor:p.instructor||"",tipo:p.tipo||""}),[h,S]=m.useState(!1),[a,n]=m.useState(1),[d,T]=m.useState(10),z=s=>{const r=Object.keys(s).reduce((y,u)=>(s[u]!==""&&(y[u]=s[u]),y),{});N.get(route("admin.historial"),r,{preserveState:!0,preserveScroll:!0})},k=()=>{c({fecha:"",instructor:"",tipo:""}),N.get(route("admin.historial"),{},{preserveState:!0,preserveScroll:!0})},x={totalRegistrosHoy:o.totalRegistrosHoy||0,llegadasPuntuales:o.llegadasPuntuales||0,llegadasTarde:o.llegadasTarde||0,ausencias:o.ausencias||0},F=[{id:1,instructor:"MarÃ­a GarcÃ­a",area:"Sistemas",fecha:"11/11/2024",horaEntrada:"07:00",horaSalida:"15:00",estado:"Puntual"},{id:2,instructor:"Juan PÃ©rez",area:"MatemÃ¡ticas",fecha:"11/11/2024",horaEntrada:"07:30",horaSalida:"15:30",estado:"Tarde"},{id:3,instructor:"Ana LÃ³pez",area:"InglÃ©s",fecha:"11/11/2024",horaEntrada:"07:15",horaSalida:"15:15",estado:"Puntual"}],j=i.data&&i.data.length>0?i.data:i.length>0?i:F,E=j.length,g=Math.ceil(E/d),f=(a-1)*d,A=f+d,b=j.slice(f,A),H=s=>{n(s),window.scrollTo({top:0,behavior:"smooth"})},L=()=>{a>1&&(n(a-1),window.scrollTo({top:0,behavior:"smooth"}))},I=()=>{a<g&&(n(a+1),window.scrollTo({top:0,behavior:"smooth"}))},R=s=>{T(s),n(1)},M=s=>{n(1),z(s)};return e.jsx($,{title:"Historial de Asistencias - SENA",header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Historial de Entrada y Salida"}),e.jsx("p",{className:"text-gray-600",children:"Consulte el historial completo de asistencias de instructores"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l,{variant:"primary",size:"base",onClick:()=>S(!h),className:"flex items-center gap-2",children:[e.jsx(J,{size:16}),h?"Ocultar Filtros":"Mostrar Filtros"]}),e.jsxs(l,{variant:"info",size:"base",onClick:()=>M(t),className:"flex items-center gap-2",children:[e.jsx(v,{size:16}),"Buscar"]})]})]}),children:e.jsxs("div",{className:"p-8",children:[h&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-green-600",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros de BÃºsqueda"})]}),(t.fecha||t.instructor||t.tipo)&&e.jsxs(l,{variant:"danger",size:"sm",onClick:k,className:"flex items-center gap-1",children:[e.jsx(O,{size:14}),"Limpiar Filtros"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“… Fecha"}),e.jsx("input",{type:"date",value:t.fecha,onChange:s=>c({...t,fecha:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ‘¨â€ðŸ« Instructor"}),e.jsxs("select",{value:t.instructor,onChange:s=>c({...t,instructor:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[e.jsx("option",{value:"",children:"Todos los instructores"}),P.map(s=>e.jsx("option",{value:s.nombre,children:s.nombre},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“Š Tipo de Registro"}),e.jsxs("select",{value:t.tipo,onChange:s=>c({...t,tipo:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors",children:[e.jsx("option",{value:"",children:"Todos los registros"}),e.jsx("option",{value:"completo",children:"âœ… DÃ­a Completo"}),e.jsx("option",{value:"tarde",children:"â° Llegada Tarde"}),e.jsx("option",{value:"ausente",children:"âŒ Ausentes"})]})]})]}),(t.fecha||t.instructor||t.tipo)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Filtros activos:"}),t.fecha&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:["ðŸ“… ",t.fecha]}),t.instructor&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["ðŸ‘¨â€ðŸ« ",t.instructor]}),t.tipo&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["ðŸ“Š ",t.tipo==="completo"?"DÃ­a Completo":t.tipo==="tarde"?"Llegada Tarde":t.tipo==="ausente"?"Ausentes":t.tipo]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Registros"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.totalRegistrosHoy}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.fecha?`Fecha: ${t.fecha}`:"Hoy"})]}),e.jsx(w,{className:"text-green-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas Puntuales"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.llegadasPuntuales}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Antes de 07:15"})]}),e.jsx(C,{className:"text-blue-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas Tarde"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.llegadasTarde}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"DespuÃ©s de 07:15"})]}),e.jsx(C,{className:"text-yellow-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ausencias"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.ausencias}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sin registro"})]}),e.jsx(w,{className:"text-red-500",size:24})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Historial de Asistencias",t.fecha&&` - ${t.fecha}`]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[b.length," registros"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ãrea"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Entrada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Salida"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((s,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.instructor}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.area}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.fecha}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaEntrada}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaSalida}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.estado==="Puntual"?"bg-green-100 text-green-800":s.estado==="Tarde"?"bg-yellow-100 text-yellow-800":s.estado==="Ausente"?"bg-red-100 text-red-800":s.estado==="Salida"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.estado})})]},s.id||r))})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"secondary",size:"sm",onClick:L,disabled:a===1,className:"flex items-center",children:e.jsx(q,{size:16})}),Array.from({length:g},(s,r)=>e.jsx(l,{onClick:()=>H(r+1),variant:a===r+1?"primary":"secondary",size:"sm",children:r+1},r)),e.jsx(l,{variant:"secondary",size:"sm",onClick:I,disabled:a===g,className:"flex items-center",children:e.jsx(G,{size:16})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mr-2",children:"Registros por pÃ¡gina:"}),e.jsxs("select",{value:d,onChange:s=>R(Number(s.target.value)),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})]})]})})}export{ie as default};
