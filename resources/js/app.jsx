import '../css/app.css';
import './bootstrap';

import { createInertiaApp } from '@inertiajs/react';
import { resolvePageComponent } from 'laravel-vite-plugin/inertia-helpers';
import { createRoot } from 'react-dom/client';

const appName = import.meta.env.VITE_APP_NAME || 'Laravel';

// Mapa de colores con sus valores RGB
const colorMap = {
    green: { 50: '240, 253, 244', 100: '220, 252, 231', 200: '187, 247, 208', 300: '134, 239, 172', 400: '74, 222, 128', 500: '34, 197, 94', 600: '22, 163, 74', 700: '16, 185, 74', 800: '20, 83, 45', 900: '20, 83, 45' },
    blue: { 50: '239, 246, 255', 100: '219, 234, 254', 200: '191, 219, 254', 300: '147, 197, 253', 400: '96, 165, 250', 500: '59, 130, 246', 600: '37, 99, 235', 700: '29, 78, 216', 800: '30, 58, 138', 900: '30, 58, 138' },
    indigo: { 50: '238, 242, 255', 100: '224, 231, 255', 200: '199, 210, 254', 300: '165, 180, 252', 400: '129, 140, 248', 500: '99, 102, 241', 600: '79, 70, 229', 700: '67, 56, 202', 800: '55, 48, 163', 900: '55, 48, 163' },
    purple: { 50: '250, 245, 255', 100: '243, 232, 255', 200: '232, 204, 255', 300: '216, 180, 254', 400: '192, 132, 250', 500: '168, 85, 247', 600: '147, 51, 234', 700: '126, 34, 206', 800: '88, 28, 135', 900: '88, 28, 135' },
    red: { 50: '254, 242, 242', 100: '254, 226, 226', 200: '254, 202, 202', 300: '252, 165, 165', 400: '248, 113, 113', 500: '239, 68, 68', 600: '220, 38, 38', 700: '185, 28, 28', 800: '127, 29, 29', 900: '127, 29, 29' },
    orange: { 50: '255, 247, 237', 100: '255, 237, 213', 200: '254, 215, 170', 300: '253, 186, 116', 400: '251, 146, 60', 500: '249, 115, 22', 600: '234, 88, 12', 700: '194, 65, 12', 800: '124, 45, 18', 900: '124, 45, 18' },
    yellow: { 50: '254, 252, 232', 100: '254, 248, 204', 200: '254, 240, 138', 300: '253, 224, 71', 400: '250, 204, 21', 500: '234, 179, 8', 600: '202, 138, 4', 700: '161, 98, 7', 800: '113, 63, 18', 900: '113, 63, 18' },
    teal: { 50: '240, 253, 250', 100: '204, 251, 241', 200: '153, 246, 228', 300: '94, 234, 212', 400: '45, 212, 191', 500: '20, 184, 166', 600: '13, 148, 136', 700: '15, 118, 110', 800: '20, 83, 80', 900: '20, 83, 80' },
    cyan: { 50: '240, 249, 250', 100: '207, 250, 254', 200: '165, 243, 252', 300: '103, 232, 249', 400: '34, 211, 238', 500: '34, 211, 238', 600: '8, 145, 178', 700: '14, 116, 144', 800: '21, 94, 117', 900: '21, 94, 117' },
    gray: { 50: '249, 250, 251', 100: '243, 244, 246', 200: '229, 231, 235', 300: '209, 213, 219', 400: '156, 163, 175', 500: '107, 114, 128', 600: '75, 85, 99', 700: '55, 65, 81', 800: '31, 41, 55', 900: '17, 24, 39' },
    slate: { 50: '248, 250, 252', 100: '241, 245, 249', 200: '226, 232, 240', 300: '203, 213, 225', 400: '148, 163, 184', 500: '100, 116, 139', 600: '71, 85, 105', 700: '51, 65, 85', 800: '30, 41, 59', 900: '15, 23, 42' },
    stone: { 50: '250, 250, 249', 100: '245, 245, 244', 200: '231, 229, 228', 300: '214, 211, 209', 400: '168, 162, 158', 500: '120, 113, 108', 600: '87, 83, 82', 700: '68, 64, 60', 800: '41, 37, 36', 900: '28, 25, 23' }
};

// FunciÃ³n para aplicar el esquema de colores
const applyColorScheme = (colorName) => {
    const color = colorMap[colorName] || colorMap.green;
    const root = document.documentElement;
    Object.entries(color).forEach(([shade, rgb]) => {
        root.style.setProperty(`--primary-${shade}`, rgb);
    });
    localStorage.setItem('app-color-scheme', colorName);
};

createInertiaApp({
    title: (title) => `${title} - ${appName}`,
    resolve: (name) =>
        resolvePageComponent(
            `./Pages/${name}.jsx`,
            import.meta.glob('./Pages/**/*.jsx'),
        ),
    setup({ el, App, props }) {
        try {
            // Aplicar el color del sistema al cargar
            const colorFromSettings = props?.initialPage?.props?.systemSettings?.primary_color || 'green';
            applyColorScheme(colorFromSettings);
        } catch (error) {
            console.warn('Error al aplicar esquema de colores:', error);
            applyColorScheme('green');
        }

        const root = createRoot(el);
        root.render(<App {...props} />);
    },
    progress: {
        color: '#4B5563',
    },
});
