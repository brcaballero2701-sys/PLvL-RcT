import{j as e}from"./app-RZ6KLPYO.js";import{b as w,r as p,a as m}from"./vendor-x9zrslyQ.js";import{S as F,F as I}from"./SidebarLayout-CnrJwSn-.js";import{U as _}from"./users-F8RKVWAu.js";import{C as g}from"./clock-BxYY4ze5.js";import{C as S}from"./calendar-lDWT8Q70.js";import{T as C}from"./trending-up-kLW4bIyY.js";import{F as k}from"./funnel-DCrBAa9x.js";import{D as T}from"./download-BHf5bgVU.js";import{C as H,a as R}from"./chevron-right-LjKBkTtf.js";import"./LogoDisplay-D9oHNFRY.js";import"./createLucideIcon-DJ0S87ah.js";import"./log-out-EHiVwLuR.js";import"./settings-BHex1vnf.js";import"./shield-sybB8x6n.js";function Q({instructores:u=[],reportesData:h=[],estadisticas:c={},filtros:l={},areas:f=[],pagination:t={}}){const{systemSettings:A}=w().props,[r,o]=p.useState({fechaInicio:l.fechaInicio||"",fechaFin:l.fechaFin||"",instructor:l.instructor||"",area:l.area||""}),d={totalInstructores:c.totalInstructores||0,presentesHoy:c.presentesHoy||0,ausentesHoy:c.ausentesHoy||0,tardesHoy:c.tardesHoy||0,promedioAsistencia:c.promedioAsistencia||"0%"},j=()=>{const s=Object.keys(r).reduce((i,n)=>(r[n]!==""&&(i[n]=r[n]),i),{}),a=route("admin.reportes.exportar")+"?"+new URLSearchParams(s).toString();window.open(a,"_blank")},y=()=>{if(r.fechaInicio&&r.fechaFin){const a=new Date(r.fechaInicio),i=new Date(r.fechaFin);if(a>i){alert("La fecha de inicio no puede ser mayor que la fecha de fin");return}}const s={};r.fechaInicio&&r.fechaInicio.trim()!==""&&(s.fechaInicio=r.fechaInicio),r.fechaFin&&r.fechaFin.trim()!==""&&(s.fechaFin=r.fechaFin),r.instructor&&r.instructor.toString().trim()!==""&&(s.instructor=r.instructor),r.area&&r.area.trim()!==""&&(s.area=r.area),m.get(route("admin.reportes"),s,{preserveState:!0,preserveScroll:!0})},b=()=>{o({fechaInicio:"",fechaFin:"",instructor:"",area:""}),m.get(route("admin.reportes"),{},{preserveState:!1,preserveScroll:!0})};p.useEffect(()=>{o({fechaInicio:l.fechaInicio||"",fechaFin:l.fechaFin||"",instructor:l.instructor||"",area:l.area||""})},[l]);const x=s=>{const a=Object.keys(r).reduce((i,n)=>(r[n]!==""&&(i[n]=r[n]),i),{});a.page=s,m.get(route("admin.reportes"),a,{preserveState:!0,preserveScroll:!1})},N=()=>{t.current_page>1&&x(t.current_page-1)},v=()=>{t.current_page<t.last_page&&x(t.current_page+1)};return e.jsx(F,{title:"Reportes - SENA",header:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reportes de Asistencia"}),e.jsx("p",{className:"text-gray-600",children:"Genere y visualice reportes detallados de asistencia de instructores"})]}),children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Instructores"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.totalInstructores})]}),e.jsx(_,{className:"text-green-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Presentes"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.presentesHoy})]}),e.jsx(g,{className:"text-blue-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ausentes"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:d.ausentesHoy})]}),e.jsx(S,{className:"text-red-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-yellow-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Llegadas Tarde"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.tardesHoy})]}),e.jsx(g,{className:"text-yellow-500",size:24})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Promedio Asistencia"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.promedioAsistencia})]}),e.jsx(C,{className:"text-purple-500",size:24})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filtros de Reporte"}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Inicio"}),e.jsx("input",{type:"date",value:r.fechaInicio,onChange:s=>o({...r,fechaInicio:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Fin"}),e.jsx("input",{type:"date",value:r.fechaFin,onChange:s=>o({...r,fechaFin:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),e.jsxs("select",{value:r.instructor,onChange:s=>o({...r,instructor:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Todos los instructores"}),u.map(s=>e.jsxs("option",{value:s.id,children:[s.nombres," ",s.apellidos]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área"}),e.jsxs("select",{value:r.area,onChange:s=>o({...r,area:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Todas las áreas"}),f.map((s,a)=>e.jsx("option",{value:s,children:s},a))]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("button",{onClick:y,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[e.jsx(k,{size:16}),"Filtrar"]}),e.jsx("button",{onClick:b,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:"Limpiar"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:j,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(T,{size:16}),"Exportar Reporte"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Reporte de Asistencia",c.periodo&&e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",c.periodo.inicio," - ",c.periodo.fin,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(I,{size:16}),e.jsxs("span",{children:[t.total||0," registros encontrados"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Área/Materia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Entrada"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora Salida"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Trabajadas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.length>0?h.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.instructor}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.area}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.fecha}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaEntrada}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horaSalida}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.horasTrabajadas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.estado==="Completo"?"bg-green-100 text-green-800":s.estado==="Tarde"||s.estado.includes("Tarde")?"bg-yellow-100 text-yellow-800":s.estado.includes("Sin salida")?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:s.estado})})]},s.id||a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No hay datos de reportes disponibles para los filtros seleccionados"})})})]})}),t.last_page>1&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",e.jsx("span",{className:"font-medium",children:t.from||1})," - ",e.jsx("span",{className:"font-medium",children:t.to||0})," de"," ",e.jsx("span",{className:"font-medium",children:t.total||0})," registros"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:N,disabled:t.current_page===1,className:`flex items-center px-3 py-2 text-sm border rounded-md transition-colors ${t.current_page===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:t.last_page},(s,a)=>a+1).map(s=>s===1||s===t.last_page||s>=t.current_page-1&&s<=t.current_page+1?e.jsx("button",{onClick:()=>x(s),className:`px-3 py-2 text-sm border rounded-md transition-colors ${t.current_page===s?"bg-green-600 text-white border-green-600":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s},s):s===t.current_page-2||s===t.current_page+2?e.jsx("span",{className:"px-2 py-2 text-sm text-gray-500",children:"..."},s):null)}),e.jsxs("button",{onClick:v,disabled:t.current_page===t.last_page,className:`flex items-center px-3 py-2 text-sm border rounded-md transition-colors ${t.current_page===t.last_page?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:["Siguiente",e.jsx(R,{className:"w-4 h-4 ml-1"})]})]})]})})]})]})})}export{Q as default};
